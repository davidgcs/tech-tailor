@if (searchOpened()) {
  @if (getHistory().length > 0) {
    <p class="history">Search history (latest 10 entries): {{getHistory().join(', ')}}</p>
  } @else {
    <p class="history">Search history empty</p>
  }
  <div id="search-container">
    <div id="search">
      <mat-icon aria-hidden="false" aria-label="search icon" fontIcon="search"></mat-icon>
      <input type="text" [value]="query()" (input)="query.set($any($event.target).value)" placeholder="Search...">
    </div>
    @if(searchActive()){
      <div id="search-results">
        @if(loading$ | async) {
          <div class="search-result">
            <span>Loading...</span>
          </div>
        } @else if(error$ | async) {
          <div class="search-result">
            <span>Error: {{error$}}</span>
          </div>
        } @else {
          @for (option of filteredItems$ | async; track option.id) {
            <div class="search-result" (click)="onSelectItem(option)">
              <span>{{option.title}}</span>
            </div>
          }
          @empty {
            <div class="search-result">
              <span>No results...</span>
            </div>
          }
        }
      </div>
    }
  </div>
} @else {
  <p class="guide">Press control + K to start searching</p>
}
